<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registrar Jugador</title>
</head>
<body>
    <h1>Registrar Jugador</h1>
    <form id="form-nuevo">
        <label>Nombre:</label>
        <input type="text" id="nombre" required><br><br>

        <label>Apellido:</label>
        <input type="text" id="apellido" required><br><br>

        <label>Dorsal:</label>
        <input type="number" id="dorsal" required><br><br>

        <label>Posición:</label>
        <input type="text" id="posicion" required><br><br>

        <label>Club:</label>
        <select id="club" required>
            <option value="">Seleccione un club</option>
        </select><br><br>

        <button type="submit">Guardar</button>
    </form>

    <script>
        fetch('/api/clubes')
            .then(res => res.json())
            .then(clubes => {
                const select = document.getElementById('club');
                clubes.forEach(club => {
                    const option = document.createElement('option');
                    option.value = club.id;
                    option.textContent = club.nombre;
                    select.appendChild(option);
                });
            });

        document.getElementById("form-nuevo").addEventListener("submit", function (event) {
            event.preventDefault();

            const nuevoJugador = {
                nombre: document.getElementById("nombre").value,
                apellido: document.getElementById("apellido").value,
                dorsal: parseInt(document.getElementById("dorsal").value),
                posicion: document.getElementById("posicion").value,
                club: { id: document.getElementById("club").value }
            };

            fetch('/api/jugadores', {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(nuevoJugador)
            })
            .then(res => {
                if (res.ok) {
                    alert("Jugador registrado con éxito");
                    document.getElementById("form-nuevo").reset();
                } else {
                    alert("Error al registrar jugador");
                }
            });
        });
    </script>
</body>
</html>

